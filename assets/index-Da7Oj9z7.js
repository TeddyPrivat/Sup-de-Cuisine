(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function b(){const t=document.createElement("article");t.setAttribute("class","recette");const n=S(this.ingredients);return t.innerHTML=`
    <div>
      <img class="image-recette" src="./images/${this.image}" alt="Image de la recette"/>
    </div>
    <div class="infos">
      <div class="infos-name">
        <h1>${this.name}</h1>
      </div>
      <h3 class="infos-title">RECETTE</h3>
      <p class="infos-recette">${this.description}</p>
      <div class="ingredients-infos">
        <h3 class="infos-title">INGRÉDIENTS</h3>
        <div class="ingredients">${n} </div>
      </div>
    </div>
  `,t}function S(t){let n="";return t.forEach(e=>{const i=e.quantity?e.quantity:"",s=e.unit?e.unit:"";n+=`
    <div class="ingredient">
      ${e.ingredient} 
      <div class="quantite-unite">
        ${i} ${s}
      </div>
    </div>
    `}),n}function C(t,n){let e=t.innerText;if(t.scrollHeight>n)for(;t.scrollHeight>n;)e=e.slice(0,-1),t.innerText=e+"..."}const q=document.querySelectorAll(".description");q.forEach(t=>{C(t,72)});const B=t=>{const{id:n,image:e,name:i,description:s,ingredients:o,appliance:c}=t;return{id:n,image:e,name:i,description:s,ingredients:o,appliance:c,createCard:b}},x="https://gist.githubusercontent.com/baiello/0a974b9c1ec73d7d0ed7c8abc361fc8e/raw/e598efa6ef42d34cc8d7e35da5afab795941e53e/recipes.json";let a=[],l=[];function E(){return fetch(x).then(t=>t.json()).then(t=>(a=t,a)).catch(t=>t)}E().then(t=>{console.log(t)});function T(t){const n=new Set;return t.forEach(e=>{e.ustensils.forEach(i=>{n.add(i.toLowerCase())})}),Array.from(n)}function _(t){const n=new Set;return t.forEach(e=>{e.appliance&&n.add(e.appliance.toLowerCase())}),Array.from(n)}function N(t){const n=new Set;return t.forEach(e=>{e.ingredients&&e.ingredients.forEach(i=>{n.add(i.ingredient.toLowerCase())})}),Array.from(n)}function g(){const t=document.getElementById("searchInput").value.trim().toLowerCase();if(t.length>=3||l.length>0){const n=k(a,t);y(n)}else y(a)}function L(t){const n=document.getElementById("tags");if([...n.children].some(i=>i.textContent.trim()===t))return;const e=document.createElement("div");e.classList.add("tag"),e.innerHTML=`${t} <i class="fa fa-times"></i>`,l.push(t),e.querySelector("i").addEventListener("click",()=>{e.remove(),l=l.filter(i=>i!==t),g()}),n.appendChild(e),g()}function r(t,n,e){const i=n.value.toLowerCase();t.querySelectorAll(e).forEach(s=>{const o=s.textContent.toLowerCase();s.style.display=o.includes(i)?"block":"none"})}function M(t){const n=document.getElementById("dropdown_ingredients"),e=document.createElement("input");e.type="text",e.placeholder="Poulet...",e.className="search-bar",t.sort((i,s)=>i.localeCompare(s)),n.appendChild(e),e.addEventListener("input",()=>{r(n,e,".ingredient-item")}),t.forEach(i=>{const s=document.createElement("li");s.textContent=i,s.className="ingredient-item",s.addEventListener("click",()=>{L(i),e.value="",r(n,e,".ingredient-item")}),n.appendChild(s)})}function R(t){const n=document.getElementById("dropdown_appliances"),e=document.createElement("input");e.type="text",e.placeholder="Blender...",e.className="search-bar",t.sort((i,s)=>i.localeCompare(s)),n.appendChild(e),e.addEventListener("input",()=>{r(n,e,".appliance-item")}),t.forEach(i=>{const s=document.createElement("li");s.textContent=i,s.className="appliance-item",s.addEventListener("click",()=>{L(i),e.value="",r(n,e,".appliance-item")}),n.appendChild(s)})}function A(t){const n=document.getElementById("dropdown_ustensils"),e=document.createElement("input");e.type="text",e.placeholder="Passoire...",e.className="search-bar",t.sort((i,s)=>i.localeCompare(s)),n.appendChild(e),e.addEventListener("input",()=>{r(n,e,".ustensil-item")}),t.forEach(i=>{const s=document.createElement("li");s.textContent=i,s.className="ustensil-item",s.addEventListener("click",()=>{L(i),e.value="",r(n,e,".ustensil-item")}),n.appendChild(s)})}let m=[],f=[],h=[];E().then(t=>{h=N(t),console.log(h),M(h),m=T(t),console.log(m),A(m),f=_(t),console.log(f),R(f);const n=document.querySelector(".dropdown_button_appliances"),e=document.querySelector(".dropdown_button_ustensils"),i=document.querySelector(".dropdown_button_ingredients"),s=document.getElementById("dropdown_ustensils"),o=document.getElementById("dropdown_appliances"),c=document.getElementById("dropdown_ingredients");s.style.display="none",s.style.listStyle="none",o.style.display="none",o.style.listStyle="none",c.style.display="none",c.style.listStyle="none",n.addEventListener("click",()=>{o.style.display=o.style.display==="none"?"block":"none"}),e.addEventListener("click",()=>{s.style.display=s.style.display==="none"?"block":"none"}),i.addEventListener("click",()=>{c.style.display=c.style.display==="none"?"block":"none"})});function y(t){const n=document.getElementById("recettes"),e=document.getElementById("nbResults");if(n.innerHTML="",t.length===0){const i=document.createElement("h3");i.style.fontFamily="'Protest Strike', sans-serif",i.textContent="Aucune recette ne contient "+searchInput.value+" essayez plutôt 'tarte aux pommes'",n.appendChild(i),e.textContent=""}else t.length===1?e.textContent=t.length+" recette":e.textContent=t.length+" recettes",t.forEach(i=>{const s=B(i).createCard();n.append(s);const o=s.querySelector(".infos-recette");C(o,72)})}function k(t,n){return t.filter(e=>{const i=e.description.toLowerCase().includes(n),s=e.name.toLowerCase().includes(n),o=e.ingredients.some(d=>d.ingredient.toLowerCase().includes(n)),c=l.every(d=>{const u=d.toLowerCase(),v=e.ingredients.some(p=>p.ingredient.toLowerCase()===u),w=e.appliance&&e.appliance.toLowerCase()===u,I=e.ustensils.some(p=>p.toLowerCase()===u);return v||w||I});return(s||o||i)&&c})}function H(t,n){let e;return function(...i){clearTimeout(e),e=setTimeout(()=>t.apply(this,i),n)}}const U=H(()=>{g()},300);E().then(()=>{y(a),document.getElementById("searchInput").addEventListener("keyup",U)});
